{"id":"moon_cosmic-mc2","title":"Implement moon_cosmic to match cosmic-text-reference using moon_swash","description":"Goal: bring this MoonBit cosmic port in src/ to feature parity (as scoped by tests and public API) with the reference implementation under ./cosmic-text-reference (user called it ./cosmic-reference).","status":"open","priority":1,"issue_type":"epic","owner":"842376130@qq.com","created_at":"2026-01-29T10:03:46.212412+08:00","created_by":"Milky2018","updated_at":"2026-01-29T10:03:46.212412+08:00","labels":["cosmic","port"]}
{"id":"moon_cosmic-mc2.1","title":"Add/resolve dependency Milky2018/moon_swash","description":"Run moon add/update so Milky2018/moon_swash is resolvable; ensure moon test runs.","notes":"Installed moon_swash via moon add; fixed cmd/main to compile (prints cosmic_text_version); moon test passes.","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-29T10:03:54.716746+08:00","created_by":"Milky2018","updated_at":"2026-01-29T10:05:21.720003+08:00","closed_at":"2026-01-29T10:05:21.720006+08:00","labels":["deps"],"dependencies":[{"issue_id":"moon_cosmic-mc2.1","depends_on_id":"moon_cosmic-mc2","type":"parent-child","created_at":"2026-01-29T10:03:54.717411+08:00","created_by":"Milky2018"}]}
{"id":"moon_cosmic-mc2.2","title":"Replace MVP shaping with swash-based shaping/metrics","description":"Implement shaping and per-glyph advances using moon_swash; wire into layout/buffer.","notes":"Implemented core glyph cache primitives (CacheKey/SubpixelBin + tests), added minimal FontSystem backed by moon_swash, added ShapeLine::build_with_font_system using moon_swash charmap+metrics, and added SwashCache (moon_swash/scale) with image caching + with_pixels.","status":"in_progress","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-29T10:03:54.794497+08:00","created_by":"Milky2018","updated_at":"2026-01-29T10:36:58.828153+08:00","labels":["shaping"],"dependencies":[{"issue_id":"moon_cosmic-mc2.2","depends_on_id":"moon_cosmic-mc2","type":"parent-child","created_at":"2026-01-29T10:03:54.795137+08:00","created_by":"Milky2018"}]}
{"id":"moon_cosmic-mc2.3","title":"Align public API/tests with reference","description":"Compare exposed types/functions with ./cosmic-text-reference; add/adjust tests for parity.","notes":"Added BidiParagraphs iterator (LineIter-based approximation) + test, as groundwork for wrap_stability-style parity.","status":"in_progress","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-29T10:03:54.872607+08:00","created_by":"Milky2018","updated_at":"2026-01-29T11:03:14.793414+08:00","labels":["tests"],"dependencies":[{"issue_id":"moon_cosmic-mc2.3","depends_on_id":"moon_cosmic-mc2","type":"parent-child","created_at":"2026-01-29T10:03:54.873243+08:00","created_by":"Milky2018"}]}
{"id":"moon_cosmic-mc2.4","title":"Implement cluster shaping + bidi/rtl handling","description":"Switch ShapeLine/Buffer layout to operate on shaped glyph clusters (not 1 code unit = 1 glyph), add bidi paragraph direction + rtl shaping parity with cosmic-text-reference.","notes":"Added first-strong-direction RTL detection (ShapeLine.rtl) and made layout reverse glyph order when rtl; improved tab stop advance in font-based shaping (tabs snap to next stop like upstream).","status":"in_progress","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-29T10:43:14.043162+08:00","created_by":"Milky2018","updated_at":"2026-01-29T11:00:27.157282+08:00","labels":["bidi","shaping"],"dependencies":[{"issue_id":"moon_cosmic-mc2.4","depends_on_id":"moon_cosmic-mc2","type":"parent-child","created_at":"2026-01-29T10:43:14.043754+08:00","created_by":"Milky2018"}]}
{"id":"moon_cosmic-mc2.5","title":"Add Renderer/Buffer.draw API with SwashCache","description":"Port render.rs + Buffer.draw flow; use SwashCache::with_pixels to rasterize and invoke callback like upstream cosmic-text.","notes":"Implemented LayoutGlyph/PhysicalGlyph + LayoutGlyph::physical + CacheKey bin getters; added Buffer::draw_with_font_system that renders via SwashCache::with_pixels (legacy per-pixel callback).","status":"in_progress","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-29T10:43:14.117832+08:00","created_by":"Milky2018","updated_at":"2026-01-29T10:57:39.857636+08:00","labels":["render","swash"],"dependencies":[{"issue_id":"moon_cosmic-mc2.5","depends_on_id":"moon_cosmic-mc2","type":"parent-child","created_at":"2026-01-29T10:43:14.118554+08:00","created_by":"Milky2018"}]}
